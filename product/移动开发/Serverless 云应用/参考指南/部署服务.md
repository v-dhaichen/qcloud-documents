## 概念说明

- 版本是访问流量真正承载的实体，对应着一组配置信息相同的容器集合；也是一次部署所需信息的集合，包括镜像地址、服务端口、环境变量、自动扩缩容设置等。
- 每一次升级服务，可选择通过新建版本升级，或者在原版编辑配置并重新部署。两种方式的区别和操作指南，详情请参见 [升级服务](https://cloud.tencent.com/document/product/1243/46128)。

## 操作流程

登录 [CloudBase 云托管控制台](https://console.cloud.tencent.com/tcb/env/overview)，选择您需要部署的服务，单击服务名称进入服务详情页面：

![](https://main.qcloudimg.com/raw/74b7c4c1c429fe3bdf22d91609d7cb46.png)

>? 如果您还没有任何服务，请先单击【新建服务】，详情参考 [新建服务](https://cloud.tencent.com/document/product/1243/46126)。

单击【新建版本】，在新建版本窗口中，继续填写版本所需配置信息，详情请参考 [版本配置说明](https://cloud.tencent.com/document/product/1243/49177)。

![](https://main.qcloudimg.com/raw/59549c4e30b83d0d8152ba308ba436ec.png)

填写完版本配置信息后，单击【开始部署】，部署成功则状态变为“正常”。若有报错，会变为具体的错误状态。

![](https://main.qcloudimg.com/raw/42a8b25f4a9cadf973286f93c6c60d30.png)

>?
> - 若在新建版本时流量策略选择“部署完成后自动开启 100%流量”，则流量会从 0%变为 100%。
> - 若选择了“部署完成后保持流量为 0 稍后再手动调整流量”，或者选择了“部署完成后自动开启 100%流量”但还想再次调整流量，可以进行手动配置，详情请参考 [流量配置](https://cloud.tencent.com/document/product/1243/49178)。

完成了部署和流量配置后，您可能希望能够快速访问自己的服务查看效果。云托管自动为您的服务分配了一个默认域名，您可以直接单击【访问服务】，通过这个默认域名访问您的服务页面。

>?
> - 您访问服务产生的即为真实业务流量。
> - 如您配置流量时选择的模式为“按百分比”，则点击“访问服务”将按您设定的百分比概率随机访问某个版本；
> - 如您配置流量时选择的模式为“按 URL 参数”，则点击“访问服务”产生的是一个无参数的 HTTP 请求，会访问到您设置的默认版本上。您可自行构建含参数的请求进一步验证。

## 使用限制

- 一个服务可同时存在最多 10 个版本。
- 版本名由系统自动生成，格式为“服务名”+“序号”，序号按照创建顺序依次递增，不支持修改（例如，testservice-001， testservice-002 等）。
- 不再使用的版本可以手动删除，已删除的版本不计入版本总数，但不会影响新建版本的序号。(例如，删除掉版本 "testservice-002"，再次新建的版本仍然会是 "testservice-003"。）

## 资源消耗说明
无论采用哪种副本模式，**部署过程本身都会产生一定的资源消耗**。

### 低成本模式
虽然副本个数最小值为 0（无流量时缩容到 0 个实例不产生资源消耗和费用），但在部署过程中会先创建出 1 个实例，待部署成功后再触发缩容到 0。
例如，副本模式为“低成本”，规格为“1核1G”，流量策略为“部署完成后自动开启 100% 流量”，部署耗时 5 分钟，部署成功后一直无任何业务流量。因为缩容到0的观测期为半小时，故会产生CPU使用量 35（核 x 分钟）以及内存使用量 35（GiB x 分钟）。

### 高可用模式
部署开始即会创建出最小个数的实例，产生资源消耗。
例如，副本模式为“高可用”，规格为“1核1G”，最小副本个数为 5，流量策略为“部署完成后保持流量为 0 稍后再手动调整流量”，部署耗时5分钟，部署成功后一直无任何业务流量。则会产生 CPU 使用量 25（核x分钟）以及内存使用量 25（GiB x 分钟）。
